<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:image" content="https://magdielortiz.github.io/CortoCircuito//Images/WebThumbnail.jpg"/>
  <meta property="og:title" content="Corto Circuito: Somos una plataforma independiente de autogestión cultural."/>
  <title>Corto Circuito</title>
  <link rel="stylesheet" type="text/css" href="style.css">
  <link rel="stylesheet" href="https://use.typekit.net/ils7evd.css">
  <link rel="icon" href="Images/Favicon.png" type="image" sizes="16x16">
</head>
<body>
  <header class="header">
    <div class="logo">
      <a href="index.html">
        <img src="Images/CC-Web-Logo.svg" alt="Logo" />
      </a>
    </div>
    <div class="header-buttons">
      <div class="top-buttons">
        <button id="about-toggle" class="header-button about-button">About</button>
        <button id="menu-toggle" class="header-button menu-button">Menu</button>
      </div>
      <div class="agenda-label">Agenda Cultural</div>
    </div>
    <div class="header-border"></div>
  </header>

  <div id="dropdown-about" class="dropdown">
    <div class="dropdown-content">
      <p>
        Somos una plataforma independiente de autogestión cultural.
        Articulamos eventos y prácticas contemporáneas en el arte y la cultura alternativa en Santa Marta.
      </p>
    </div>
  </div>

  <div id="dropdown-menu" class="dropdown">
    <div class="dropdown-content">
      <a href="Pages/programa.html">Programa</a>
      <a href="Pages/manifiesto.html">Manifiesto</a>
  
      <div class="dropdown-row">
        <a href="Pages/aliados.html">Aliados</a>
        <a href="https://www.instagram.com/cortocircuito.sm/" target="_blank" rel="noopener noreferrer" class="insta-link">Insta</a>
      </div>
    </div>
  </div>

  <div class="main-wrapper">
    <main class="main">
      <div class="section section-first">
        <div class="center-icon">
          <img src="Images/CC-Web-ElectricSymbol.svg" alt="Icono central" />
        </div>
        <div class="overlay">
          <img src="Images/CC-Web-WarningIcon.svg" alt="Icono" class="overlay-icon" />
          <p>
            Riesgo de sobrecarga cultural.
            <span>Sugerimos continuar la navegación en su dispositivo móvil.</span>
          </p>
        </div>
      </div>
      <div class="section convocatoria">
        <div class="previa first">
          <p>Previa CortoCircuito</p>
        </div>
        <div class="tittle">
          <p>Convocatoria</p>
        </div>
        <div class="info">
          <p>“De la Sucursal del Cielo al<br>Corazón del Mundo”. Beca<br>para residencia artística en<br>La Linterna, Cali.</p>
        </div>
        <div class="date">
          <p>Fecha de cierre:<br>6 de julio</p>
        </div>
        <a
        href="https://drive.google.com/drive/folders/1LiuaTKWRxICcjufu_mTq67HqdHdyyIex?usp=sharing"
        class="info-button"
        target="_blank"
        rel="noopener noreferrer"
      >
        Info
      </a>
      </div>
      <div class="section conversatorio">
        <div class="previa">
          <p>Previa CortoCircuito</p>
        </div>
        <div class="tittle">
          <p>Conversatorio</p>
        </div>
        <div class="info">
          <p>“Identidades samarias”,<br>un espacio para repensar<br>quiénes somos.</p>
        </div>
        <div class="date">
          <p>La Casa del Totumo:<br>17 de julio de 4:30 pm a 6:30 pm</p>
        </div>
      </div>
      <div class="section prelanzamiento">
        <div class="previa">
          <p>Previa CortoCircuito</p>
        </div>
        <div class="tittle">
          <p>Prelanzamiento</p>
        </div>
        <div class="info">
          <p>Comunidad, selección de<br>música, cócteles eléctricos<br>y merch. Aforo limitado.</p>
        </div>
        <div class="date">
          <p>La Casa del Totumo:<br>17 de julio, a partir de las 7:00 pm</p>
        </div>
      </div>
      <div class="section ofrenda">
        <div class="previa">
          <p>Previa CortoCircuito</p>
        </div>
        <div class="tittle">
          <p>Ofrenda al Agua</p>
        </div>
        <div class="info">
          <p>Todo nace del agua y vuelve<br>al agua. Ritual de gratitud<br>y pagamento al Territorio.</p>
        </div>
        <div class="date">
          <p>Desembocadura del río<br>Manzanares, playa de Los Cocos:<br>
            18 de julio, 6:00 pm</p>
        </div>
      </div>
    </main>
  </div>
  <div class="pagination-dots">
    <span class="dot active"></span>
    <span class="dot"></span>
    <span class="dot"></span>
    <span class="dot"></span>
    <span class="dot"></span>
  </div>
  <footer class="footer">
    <div class="footer-border"></div>
    <p class="footer-text">Auspiciadores</p>
    <div class="sponsors">
      <img src="Images/CC-Web-Auspiciadores.svg" alt="Sponsor 1" />
    </div>
  </footer>
<script>

  // DROPDOWNS & DYNAMIC MAIN HEIGHT
  const menuToggle    = document.getElementById("menu-toggle");
  const aboutToggle   = document.getElementById("about-toggle");
  const dropdownMenu  = document.getElementById("dropdown-menu");
  const dropdownAbout = document.getElementById("dropdown-about");
  const main          = document.querySelector(".main");
  const body          = document.body;
  let   openDropdown  = null;

  function closeDropdown(dropdown) {
    dropdown.classList.remove("show");
    dropdown.style.height = "0";
    updateMainHeight();
    body.classList.remove("lock-scroll");
    if (dropdown === dropdownMenu)   menuToggle.classList.remove("active");
    if (dropdown === dropdownAbout)  aboutToggle.classList.remove("active");
    openDropdown = null;
  }

  function openDropdownWithContent(dropdown) {
    dropdown.classList.add("show");
    dropdown.style.height = dropdown.scrollHeight + "px";
    requestAnimationFrame(updateMainHeight);
    body.classList.add("lock-scroll");
    if (dropdown === dropdownMenu)   menuToggle.classList.add("active");
    if (dropdown === dropdownAbout)  aboutToggle.classList.add("active");
    openDropdown = dropdown;
  }

  function toggleDropdown(clickedDropdown) {
    if (openDropdown === clickedDropdown) {
      closeDropdown(clickedDropdown);
    } else if (openDropdown === null) {
      openDropdownWithContent(clickedDropdown);
    } else {
      const prev = openDropdown;
      closeDropdown(prev);
      setTimeout(() => openDropdownWithContent(clickedDropdown), 400);
    }
  }

  function updateMainHeight() {
    const header   = document.querySelector(".header");
    const footer   = document.querySelector(".footer");
    const dropdown = document.querySelector(".dropdown.show");
    if (!dropdown) {
      const avail = window.innerHeight
                  - header.offsetHeight
                  - footer.offsetHeight;
      main.style.height = avail + "px";
    }
  }

  function initMainHeight() {
    const header = document.querySelector(".header");
    const footer = document.querySelector(".footer");
    const avail  = window.innerHeight
                 - header.offsetHeight
                 - footer.offsetHeight;
    main.style.height = avail + "px";
  }

  menuToggle.addEventListener("click", () => toggleDropdown(dropdownMenu));
  aboutToggle.addEventListener("click", () => toggleDropdown(dropdownAbout));
  window.addEventListener("resize", updateMainHeight);
  document.addEventListener("DOMContentLoaded", initMainHeight);

  // SMOOTH “SNAP” SWIPE & PAGINATION DOTS

  ;(function() {
    const slider     = main;
    const panels     = slider.querySelectorAll(".section");
    const panelCount = panels.length;
    const threshold  = 0.2;    // 20% swipe to move
    let   startX     = 0;

    const dots = document.querySelectorAll(".pagination-dots .dot");
    function setActiveDot(i) {
      dots.forEach((d, idx) => 
        d.classList.toggle("active", idx === i)
      );
    }

    setActiveDot(0);

    slider.addEventListener("touchstart", e => {
      startX = e.touches[0].clientX;
    });

    slider.addEventListener("touchend", e => {
      const endX    = e.changedTouches[0].clientX;
      const dx      = startX - endX;
      const width   = slider.offsetWidth;
      const current = Math.round(slider.scrollLeft / width);
      let   target  = current;

      if      (dx >  width * threshold && current < panelCount - 1) target = current + 1;
      else if (dx < -width * threshold && current > 0)               target = current - 1;

      slider.scrollTo({
        left:     target * width,
        behavior: "smooth"
      });

      setActiveDot(target);
    });

    slider.addEventListener("scroll", () => {
      const idx = Math.round(slider.scrollLeft / slider.offsetWidth);
      setActiveDot(idx);
    });
  })();
</script>
</body>
</html>